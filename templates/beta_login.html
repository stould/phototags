<!DOCTYPE html>
<html>
  <head>	
	<title>Facebook Login JavaScript Example</title>
	<meta charset="UTF-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 
	<style> 
	html,body{
	padding:0;
	margin:0;
	}
	</style>
  </head>
  <body>
	<script>

	// ######INITAL VALUES:
	// PUT CONTENT PAGE
	// PUT LOADER
	
	$('body').append('<div id="content_page" style="padding-top:15px; padding-left:5px;"></div>');
	$('#content_page').append('	<div id="myheader"><input id="search_tool1" style="width:360px; margin-left:5px; margin-right:10px;" type="text" placeholder=" Procure pessoas, coisas e locais "/><span id="img_search1"><img src="http://www.japantimes.co.jp/wp-content/themes/jt_theme/library/img/search.png" style=" margin-left:15px; width:12px; height:12px;"/></div>');
	$('#content_page').append('<div style="clear:both; margin-bottom:10px;"></div>');
	$('#content_page').append('<div id="ans"> <center><img class="_359 img" id="myLoader" src="https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif" alt="" id="u_0_2w" height="32" width="32"></center></div> ');
	 	 	
	function statusChangeCallback(response) {
	   console.log('statusChangeCallback');
	   console.log(response);

	   if (response.status === 'connected') {
		  process(response);
	   } else if (response.status === 'not_authorized') {
		   putLoginPage();
	   } else {
			putLoginPage();
	   }
	 }

	 function process(response) {
		putPhotoPage();
	 }

	 function checkLoginState() {
       FB.getLoginStatus(function(response) {
		 statusChangeCallback(response);
       });
	 }
	 
	 window.fbAsyncInit = function() {
	   FB.init({
		 appId      : '466465463517234',
		 cookie     : true,  // enable cookies to allow the server to access 
         // the session
		 xfbml      : true,  // parse social plugins on this page
		 version    : 'v2.3' // use version 2.3
	   });
	   
	   
	   FB.getLoginStatus(function(response) {
		 statusChangeCallback(response);
	   });	   
	 };
	 
	 // Load the SDK asynchronously
	 (function(d, s, id) {
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) return;
       js = d.createElement(s); js.id = id;
       js.src = "//connect.facebook.net/en_US/sdk.js";
       fjs.parentNode.insertBefore(js, fjs);
	 }(document, 'script', 'facebook-jssdk'));

	 function putLoginPage(){
		 // REMOVE LOADER
		$('#myLoader').hide();
		// PUT LOGIN BUTTON
	 	$('#content_page').append('	<fb:login-button scope="public_profile,email"  onlogin="checkLoginState();"></fb:login-button><div id="status"></div>');
	 }

	 function putPhotoPage(){
	 	// this function get all pics and put components inside div
		$.ajax({
		 type: 'GET',
		 url: 'https://phototags.herokuapp.com/local'
	   }).done(function(data) {
		// REMOVE LOADER
		$('#myLoader').hide();
			 for(var i=0;i<4;i++){
				for(var j=0;j<4;j++){    
		  $("#ans").append('<div class="we_pic" style="float:left;"><img src="'+data+'" style="width:200px; height:200px; float:left; margin-left:4px; margin-top:4px; border:thin solid #bebfbf"/></div>');
				}
			 }
		 });
	 }
  
	</script>
	
	<!--
	Below we include the Login Button social plugin. This button uses
	the JavaScript SDK to present a graphical Login button that triggers
	the FB.login() function when clicked.


	
	-->
		
  </body>
</html>
